<h1>Admin – Códigos</h1>

<div class="admin-actions">
  <!-- Formulário de gerar códigos -->
  <form method="post" action="/admin/codigos">
    <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
    <label>Quantidade:</label>
    <input type="number" name="quantidade" value="10" min="1">
    <button type="submit" class="btn btn-primary">Gerar códigos</button>
  </form>

  <!-- Botão de export CSV -->
  <%= form_with url: export_respostas_admin_codigos_path, method: :get, data: { turbo: false }, local: true do %>
    <%= submit_tag "Exportar respostas CSV", class: "btn btn-success" %>
  <% end %>

  </div>

<hr>

<table class="admin-table">
  <thead>
    <tr>
      <th>Código</th>
      <th>Status</th>
      <th>Criado em</th>
    </tr>
  </thead>
  <tbody>
    <% @codigos.each do |codigo| %>
      <tr>
        <td><strong><%= codigo.codigo %></strong></td>
        <td>
          <% if codigo.utilizado %>
            ❌ Usado
          <% else %>
            ✅ Livre
          <% end %>
        </td>
        <td><%= codigo.created_at&.strftime("%d/%m/%Y %H:%M") %></td>
      </tr>
    <% end %>
  </tbody>
</table>

